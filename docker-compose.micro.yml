version: '3'

services:

  profile:
    build: ./tfc-profile
    ports:
      - 8083:8083
    tty: true
    environment:
      - DB_HOST=mongo
      - DB_PORT=27017
    networks:
      - backend

  account:
      image: account
      build: ./tfc-account
      ports:
        - 8081:8081
      environment:
        SPRING_DATA_MONGODB_URI: mongodb://mongo:27017/account
        kafkabroker: broker:29092
      networks:
        - backend
      container_name: account

  rollinghistory:
    image: rollinghistory
    build: ./tfc-rolling-history
    ports:
      - 8084:8084
    environment:
      SPRING_DATA_MONGODB_URI: mongodb://mongo:27017/account
      kafkabroker: broker:29092
    networks:
      - backend
    container_name: rollinghistory

  savings:
    image: savings
    build: ./tfc-savings
    ports:
      - 8082:8082
    environment:
      SPRING_DATA_MONGODB_URI: mongodb://mongo:27017/savings
      kafkabroker: broker:29092
    networks:
      - backend
    container_name: savings

networks:
  backend:
